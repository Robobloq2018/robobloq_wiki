
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>React JS · test search plus plugin</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search-plus/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="Configuring-react-js.html" />
    
    
    <link rel="prev" href="Requiring-files.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="Introduction-to-Webpack.html">
            
                <a href="Introduction-to-Webpack.html">
            
                    
                    介绍 Webpack
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="Getting-started.html">
            
                <a href="Getting-started.html">
            
                    
                    第一步
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="Running-a-workflow.html">
            
                <a href="Running-a-workflow.html">
            
                    
                    开始工作流
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="Automatic-browser-refresh.html">
            
                <a href="Automatic-browser-refresh.html">
            
                    
                    浏览器自动刷新
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="Requiring-files.html">
            
                <a href="Requiring-files.html">
            
                    
                    引入文件
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter active" data-level="1.3" data-path="Introduction-to-React-JS.html">
            
                <a href="Introduction-to-React-JS.html">
            
                    
                    React JS
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="Configuring-react-js.html">
            
                <a href="Configuring-react-js.html">
            
                    
                    配置 React JS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="Optimizing-rebundling.html">
            
                <a href="Optimizing-rebundling.html">
            
                    
                    优化重合并
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="Type-checking-with-flow.html">
            
                <a href="Type-checking-with-flow.html">
            
                    
                    Flow
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="CSS-Fonts-Images.md">
            
                <span>
            
                    
                    CSS, Fonts and Images
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="Loading-CSS.html">
            
                <a href="Loading-CSS.html">
            
                    
                    加载 CSS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="Automatic-CSS-refresh.html">
            
                <a href="Automatic-CSS-refresh.html">
            
                    
                    自动刷新 CSS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="Loading-LESS-or-SASS.html">
            
                <a href="Loading-LESS-or-SASS.html">
            
                    
                    加载 LESS 和 SASS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="Inlining-images.html">
            
                <a href="Inlining-images.html">
            
                    
                    内联 images
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="Inlining-fonts.html">
            
                <a href="Inlining-fonts.html">
            
                    
                    内联 fonts
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="Deployment-strategies.md">
            
                <span>
            
                    
                    部署策略
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="Structuring-configuration.html">
            
                <a href="Structuring-configuration.html">
            
                    
                    发布配置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="Single-bundle.html">
            
                <a href="Single-bundle.html">
            
                    
                    合并成单文件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="Split-app-and-vendors.html">
            
                <a href="Split-app-and-vendors.html">
            
                    
                    分离应用和第三方
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="Multiple-entry-points.html">
            
                <a href="Multiple-entry-points.html">
            
                    
                    多重入口
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="Lazy-loaded-entry-points.html">
            
                <a href="Lazy-loaded-entry-points.html">
            
                    
                    懒加载入口文件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="Isomorphic-app.html">
            
                <a href="Isomorphic-app.html">
            
                    
                    同构渲染
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="Wing-It-Like-a-Pro.html">
            
                <a href="Wing-It-Like-a-Pro.html">
            
                    
                    进阶
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="Optimizing-development.html">
            
                <a href="Optimizing-development.html">
            
                    
                    优化开发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="Hot-loading-components.html">
            
                <a href="Hot-loading-components.html">
            
                    
                    热加载组件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="JavaScript-next.html">
            
                <a href="JavaScript-next.html">
            
                    
                    使用下一代 JavaScript
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="Optimizing-caching.html">
            
                <a href="Optimizing-caching.html">
            
                    
                    优化缓存
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="Matchers.html">
            
                <a href="Matchers.html">
            
                    
                    匹配器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="Lazy-loading-entry-points.md">
            
                <span>
            
                    
                    懒加载入口
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.7" data-path="Creating-a-common-bundle.md">
            
                <span>
            
                    
                    创建一个复用代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.8" data-path="Understanding-chunks.html">
            
                <a href="Understanding-chunks.html">
            
                    
                    理解 Chunks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.9" data-path="Authoring-libraries.html">
            
                <a href="Authoring-libraries.html">
            
                    
                    创建库
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >React JS</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div class="search-plus" id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <p>I remember when I saw React the first time around the time it was announced I was skeptical. Particularly mixing some sort of HTML within your code seemed against good conventions. It just felt like a &quot;bad idea&quot;&#xAE;.</p>
<p>&#x6211;&#x8BB0;&#x5F97;&#x5F53;&#x6211;&#x7B2C;&#x4E00;&#x6B21;&#x770B;&#x5230; React &#x7684;&#x65F6;&#x5019;&#x662F;&#x5341;&#x5206;&#x6000;&#x7591;&#x7684;&#xFF0C;&#x7279;&#x522B;&#x662F;&#x628A; HTML &#x63C9;&#x8FDB;&#x4EE3;&#x7801;&#x91CC;&#x8FDD;&#x80CC;&#x4E86;&#x4F20;&#x7EDF;&#x7684;&#x90A3;&#x4E9B;&#x7EA6;&#x5B9A;&#xFF0C;&#x770B;&#x8D77;&#x6765;&#x50CF;&#x662F;&#x4E00;&#x4E2A; &#x201C;&#x574F;&#x4E3B;&#x610F;&#x201D;&#x3002;</p>
<p>But that&apos;s what React and similar approaches are doing. They challenge some of the conventions and replace them with something more palatable. Sometimes a bigger change in thinking is needed for you to move forward as a developer. That&apos;s what React did for me. It takes some powerful ideas from the world of functional programming and then builds on top of those.</p>
<p>&#x4F46;&#x662F;&#x8FD9;&#x5C31;&#x662F; React&#xFF0C;&#x4ED6;&#x4EEC;&#x6311;&#x6218;&#x4E86;&#x4E00;&#x4E9B;&#x7EA6;&#x5B9A;&#xFF0C;&#x7136;&#x540E;&#x7528;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x4EE3;&#x66FF;&#x4E86;&#x3002;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x5F00;&#x53D1;&#x8005;&#xFF0C;&#x6709;&#x65F6;&#x5019;&#x4E3A;&#x4E86;&#x80FD;&#x591F;&#x6539;&#x53D8;&#x601D;&#x8003;&#x65B9;&#x5F0F;&#x662F;&#x4F60;&#x5411;&#x524D;&#x8D70;&#x7684;&#x4E00;&#x4E2A;&#x5FC5;&#x7ECF;&#x4E4B;&#x8DEF;&#x3002;&#x8FD9;&#x5C31;&#x662F; React &#x5BF9;&#x6211;&#x7684;&#x5F71;&#x54CD;&#xFF0C;&#x5B83;&#x5EFA;&#x7ACB;&#x5728;&#x51FD;&#x6570;&#x5F0F;&#x7F16;&#x7A0B;&#x4E0A;&#x5E26;&#x7ED9;&#x4E86;&#x6211;&#x5F88;&#x591A;&#x6709;&#x610F;&#x601D;&#x7684;&#x60F3;&#x6CD5;&#x3002;</p>
<h2 id="&#x57FA;&#x7840;&#x529F;&#x80FD;">&#x57FA;&#x7840;&#x529F;&#x80FD;</h2>
<p>Before you can understand React and how it changes web development, there are a few things you should know about it. React itself won&apos;t be enough. It solves only the problem of views. You still need to complement it with something else. But that&apos;s a good thing.</p>
<p>&#x5728;&#x4F60;&#x80FD;&#x7406;&#x89E3; React &#x662F;&#x5982;&#x4F55;&#x6539;&#x53D8; Web &#x5F00;&#x53D1;&#x4E4B;&#x524D;&#xFF0C;&#x8FD9;&#x91CC;&#x6709;&#x4E00;&#x70B9;&#x4E1C;&#x897F;&#x4F60;&#x9700;&#x8981;&#x77E5;&#x9053;&#x7684;&#x3002;React &#x5B83;&#x672C;&#x8EAB;&#x662F;&#x4E0D;&#x591F;&#x4E30;&#x5BCC;&#x7684;&#xFF0C;&#x5B83;&#x53EA;&#x80FD;&#x89E3;&#x51B3;&#x4E00;&#x4E9B;&#x89C6;&#x56FE;&#x4E0A;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x4F60;&#x4ECD;&#x7136;&#x9700;&#x8981;&#x4E00;&#x4E9B;&#x4E1C;&#x897F;&#x53BB;&#x5E2E;&#x52A9;&#x5B83;&#x5B8C;&#x6210;&#x4E8B;&#x60C5;&#x3002;</p>
<p>The greatest and worst feature of frameworks is that they sort of cage you in. As long as you are doing what they expect you to do within their boundaries, everything is fine. It is only after you start to reach beyond those boundaries that problems begin to appear. In a library driven approach you aren&apos;t as bound. Initially you might not be as fast or efficient but over time as problems become harder, you will have more choices available.</p>
<p>&#x6700;&#x4F1F;&#x5927;&#x7684;&#x548C;&#x6700;&#x5DEE;&#x52B2;&#x7684;&#x6846;&#x67B6;&#x603B;&#x662F;&#x4F01;&#x56FE;&#x7ED9;&#x4F60;&#x5EFA;&#x7ACB;&#x4E00;&#x4E2A;&#x7B3C;&#x5B50;&#xFF0C;&#x5F53;&#x4F60;&#x5728;&#x4ED6;&#x4EEC;&#x5212;&#x5B9A;&#x7684;&#x5730;&#x76D8;&#x91CC;&#x80FD;&#x591F;&#x5B8C;&#x6210;&#x4EFB;&#x4F55;&#x9700;&#x6C42;&#xFF0C;&#x4E00;&#x5207;&#x90FD;&#x662F;&#x5F88;&#x597D;&#x7684;&#xFF0C;&#x4F46;&#x662F;&#xFF0C;&#x5F53;&#x4F60;&#x9700;&#x8981;&#x8DE8;&#x51FA;&#x8FB9;&#x754C;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5F00;&#x59CB;&#x6709;&#x95EE;&#x9898;&#x4E86;&#xFF0C;&#x5728;&#x4E00;&#x4E2A;&#x5E93;&#x9A71;&#x52A8;&#x65B9;&#x6CD5;&#x91CC;&#x4F60;&#x662F;&#x4E0D;&#x88AB;&#x9650;&#x5236;&#x7684;&#xFF0C;&#x6700;&#x521D;&#x4F60;&#x53EF;&#x80FD;&#x662F;&#x9AD8;&#x6548;&#x5730;&#x5B8C;&#x6210;&#x9700;&#x6C42;&#xFF0C;&#x4F46;&#x662F;&#x4F34;&#x968F;&#x65F6;&#x95F4;&#x7684;&#x63A8;&#x8FDB;&#xFF0C;&#x95EE;&#x9898;&#x5F00;&#x59CB;&#x53D8;&#x5F97;&#x4E25;&#x5CFB;&#x8D77;&#x6765;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x66F4;&#x591A;&#x53EF;&#x884C;&#x7684;&#x9009;&#x62E9;&#x3002;</p>
<h3 id="jsx-&#x7684;&#x57FA;&#x7840;">JSX &#x7684;&#x57FA;&#x7840;</h3>
<p>React provides a component centric approach to frontend development. You will design your application as smaller components, each of which has it own purpose. Taken to the extreme a component may contain its logic, layout and basic styling. To give you an example of JSX:</p>
<p>React &#x4E3A;&#x524D;&#x7AEF;&#x5F00;&#x53D1;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x7EC4;&#x4EF6;&#x4E3A;&#x4E2D;&#x5FC3;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x4E3A;&#x4F60;&#x7684;&#x5E94;&#x7528;&#x8BBE;&#x8BA1;&#x4E00;&#x4E2A;&#x66F4;&#x5C0F;&#x7684;&#x7EC4;&#x4EF6;&#xFF0C;&#x6240;&#x6709;&#x7EC4;&#x4EF6;&#x6709;&#x5404;&#x81EA;&#x7684;&#x76EE;&#x7684;&#xFF0C;&#x751A;&#x81F3;&#x6781;&#x7AEF;&#x6765;&#x8BF4;&#xFF0C;&#x4E00;&#x4E2A;&#x7EC4;&#x4EF6;&#x53EF;&#x80FD;&#x5305;&#x542B;&#x5B83;&#x81EA;&#x8EAB;&#x7684;&#x903B;&#x8F91;&#xFF0C;&#x7ED3;&#x6784;&#x548C;&#x57FA;&#x672C;&#x7684;&#x6837;&#x5F0F;&#x3002;&#x8FD9;&#x91CC;&#x6709;&#x4E2A; JSX &#x7684;&#x4F8B;&#x5B50;&#xFF1A;</p>
<pre><code class="lang-html">...
<span class="hljs-tag">&lt;<span class="hljs-name">TodoItem</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&apos;urgent&apos;</span> <span class="hljs-attr">owner</span>=<span class="hljs-string">{owner}</span> <span class="hljs-attr">task</span>=<span class="hljs-string">&apos;Make a dinner&apos;</span> /&gt;</span>
...
</code></pre>
<p>You can see a couple of basic features of JSX here. Instead of using <code>class</code>, we&apos;ll use the JavaScript equivalent. In addition we have defined a couple of custom properties in form of <code>owner</code> and <code>task</code>. <code>owner</code> is something that is injected from a variable named <code>owner</code> that&apos;s within the same scope as our JSX. For <code>task</code> we provide a fixed value.</p>
<p>&#x4F60;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x4E00;&#x4E2A;&#x57FA;&#x672C;&#x529F;&#x80FD;&#x7684; JSX&#xFF0C;&#x6211;&#x4EEC;&#x7528; <code>className</code> &#x66FF;&#x4EE3;&#x4E86;&#x4F7F;&#x7528; <code>class</code>&#x3002;&#x6B64;&#x5916;&#xFF0C;&#x6211;&#x4EEC;&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x4E9B;&#x81EA;&#x5B9A;&#x4E49;&#x5C5E;&#x6027; <code>owner</code> &#x548C; <code>task</code>&#xFF0C;<code>owner</code> &#x7684;&#x503C;&#x662F;&#x4ECE; JSX &#x540C;&#x73AF;&#x5883;&#x4E2D;&#x4E00;&#x4E2A;&#x53D8;&#x91CF;&#x53EB; <code>owner</code> &#x6CE8;&#x5165;&#xFF0C;&#x800C;&#x6211;&#x4EEC;&#x4E3A; <code>task</code> &#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x56FA;&#x5B9A;&#x7684;&#x503C;&#x3002;</p>
<p>In practice you would most likely structure this a little differently to fit your data model better. That goes a little beyond basic React, though.</p>
<p>&#x5728;&#x5B9E;&#x8DF5;&#x4E2D;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x4F60;&#x7684;&#x6570;&#x636E;&#x6A21;&#x578B;&#x7ED3;&#x6784;&#x6765;&#x7A0D;&#x5FAE;&#x8C03;&#x6574;&#x76EE;&#x5F55;&#x7ED3;&#x6784;&#x4F1A;&#x66F4;&#x597D;&#xFF0C;&#x867D;&#x7136;&#x662F; React &#x8FDB;&#x9636;&#x7684;&#x77E5;&#x8BC6;&#x70B9;&#x4E86;&#x3002;</p>
<p>We can mix normal JavaScript code within those {}&apos;s. We can use this idea to render a list of <code>TodoItem</code>s like this (ES syntax):</p>
<p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x7528;&#x90A3;&#x4E9B; <code>{}</code> &#x6765;&#x6DF7;&#x5408;&#x666E;&#x901A; JavaScript &#x4EE3;&#x7801;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x7528;&#x8FD9;&#x4E2A;&#x70B9;&#x50CF;&#x8FD9;&#x6837;&#x53BB;&#x53BB;&#x6E32;&#x67D3;&#x4E00;&#x4E2A; <code>TodoItem</code> &#x5217;&#x8868;&#xFF08;ES &#x8BED;&#x6CD5;&#xFF09;&#xFF1A;</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>{todoItems.map((todoItem, i) =&gt;
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{&apos;todoitem&apos;</span> + <span class="hljs-attr">i</span>}&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">TodoItem</span> <span class="hljs-attr">owner</span>=<span class="hljs-string">{todoItem.owner}</span> <span class="hljs-attr">task</span>=<span class="hljs-string">{todoItem.task}</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
)}<span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
</code></pre>
<p>You probably noticed something special here. What is that <code>key</code> property about? It is something that tells React the exact ordering of your items. If you don&apos;t provide unique keys for list items like this, React will warn you as it won&apos;t be able to guarantee the correct ordering otherwise.</p>
<p>&#x4F60;&#x53EF;&#x80FD;&#x6CE8;&#x610F;&#x5230;&#x8FD9;&#x91CC;&#x6709;&#x4E9B;&#x7279;&#x6B8A;&#x7684;&#x5730;&#x65B9;&#xFF0C;&#x4EC0;&#x4E48;&#x662F; <code>key</code> &#x5C5E;&#x6027;&#xFF1F;&#x8FD9;&#x662F;&#x544A;&#x8BC9; React &#x8FD9;&#x4E2A;&#x9879;&#x7684;&#x51C6;&#x786E;&#x987A;&#x5E8F;&#x3002;&#x5982;&#x679C;&#x4F60;&#x4E0D;&#x9700;&#x8981;&#x50CF;&#x8FD9;&#x6837;&#x9700;&#x8981;&#x63D0;&#x4F9B;&#x5217;&#x8868;&#x9879;&#x7684;&#x552F;&#x4E00; Key &#x7684;&#x8BDD;&#xFF0C;&#x5426;&#x5219; React &#x4F1A;&#x8B66;&#x544A;&#x4F60;&#x8FD9;&#x6837;&#x5B83;&#x6CA1;&#x529E;&#x6CD5;&#x4FDD;&#x8BC1;&#x662F;&#x6B63;&#x786E;&#x7684;&#x987A;&#x5E8F;&#x3002;</p>
<p>This has to do with the fact that React actually implements something known as Virtual DOM (VDOM for short) on top of actual DOM. It is a subset of DOM that allows React to optimize its rendering. The primary advantage of this approach is that it allows React to eschew a lot of legacy our good old DOM has gained through years. This is the secret to React&apos;s high performance.</p>
<p>&#x9700;&#x8981;&#x4E86;&#x89E3;&#x7684;&#x4E8B;&#x5B9E;&#x662F; React &#x5B9E;&#x9645;&#x4E0A;&#x5728;&#x771F;&#x5B9E; DOM &#x4E0A;&#x5B9E;&#x73B0;&#x4E86;&#x865A;&#x62DF; DOM&#xFF08;&#x7B80;&#x79F0; VDOM&#xFF09;&#xFF0C;&#x8FD9;&#x662F;&#x4E00;&#x4E2A; DOM &#x7684;&#x5B50;&#x96C6;&#xFF0C;&#x80FD;&#x591F;&#x8BA9; React &#x80FD;&#x591F;&#x4F18;&#x5316;&#x5B83;&#x7684;&#x6E32;&#x67D3;&#x3002;&#x8FD9;&#x4E2A;&#x4F18;&#x5316;&#x7684;&#x65B9;&#x6CD5;&#x662F;&#x5B83;&#x8BA9; React &#x80FD;&#x591F;&#x907F;&#x5F00;&#x56F0;&#x607C;&#x6211;&#x4EEC;&#x591A;&#x5E74;&#x7684; DOM &#x6027;&#x80FD;&#x635F;&#x8017;&#x3002;&#x8FD9;&#x5C31;&#x662F; React &#x9AD8;&#x6027;&#x80FD;&#x7684;&#x539F;&#x56E0;&#x3002;</p>
<h3 id="&#x6574;&#x4F53;&#x7EC4;&#x4EF6;">&#x6574;&#x4F53;&#x7EC4;&#x4EF6;</h3>
<p>To give you a better idea of what components look like, let&apos;s expand our <code>TodoItem</code> example into code (ES6 + JSX). I&apos;ve done this below and will walk you through it:</p>
<p>&#x4E3A;&#x4E86;&#x80FD;&#x591F;&#x8BA9;&#x4F60;&#x66F4;&#x52A0;&#x6E05;&#x695A;&#x7EC4;&#x4EF6;&#x957F;&#x4EC0;&#x4E48;&#x6837;&#x5B50;&#xFF0C;&#x8BA9;&#x6211;&#x4EEC;&#x62D3;&#x5C55; <code>TodoItem</code> &#x4F8B;&#x5B50;&#x6765;&#x611F;&#x53D7;&#x4E00;&#x4E0B;&#xFF08;ES6 + JSX&#xFF09;&#xFF0C;&#x6211;&#x5DF2;&#x7ECF;&#x641E;&#x5B8C;&#x4E86;&#xFF0C;&#x7136;&#x540E;&#x6211;&#x4EEC;&#x6765;&#x8FC7;&#x4E00;&#x904D;&#x770B;&#x770B;&#xFF1A;</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> React = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;react&apos;</span>);


<span class="hljs-built_in">module</span>.exports = React.createClass({
    getInitialState() {
        <span class="hljs-keyword">return</span> {
            <span class="hljs-comment">// &#x8BA9;&#x6211;&#x4EEC;&#x4FDD;&#x6301;&#x8FFD;&#x8E2A;&#x770B;&#x770B;&#x6211;&#x4EEC;&#x7ED9;&#x9879;&#x70B9;&#x4E86;&#x591A;&#x5C11;&#x6B21;&#x8D5E;</span>
            likes: <span class="hljs-number">0</span>,
        };
    },
    render() {
        <span class="hljs-keyword">var</span> owner = <span class="hljs-keyword">this</span>.props.owner;
        <span class="hljs-keyword">var</span> task = <span class="hljs-keyword">this</span>.props.task;
        <span class="hljs-keyword">var</span> likes = <span class="hljs-keyword">this</span>.state.likes;

        <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&apos;TodoItem&apos;</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&apos;TodoItem-owner&apos;</span>&gt;</span>{owner}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&apos;TodoItem-task&apos;</span>&gt;</span>{task}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&apos;TodoItem-likes&apos;</span>&gt;</span>{likes}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&apos;TodoItem-like&apos;</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.like}</span>&gt;</span>Like<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
    },
    like() {
        <span class="hljs-keyword">this</span>.setState({
            likes: <span class="hljs-keyword">this</span>.state.likes + <span class="hljs-number">1</span>
        });
    },
});
</code></pre>
<p>You can see some basic features of a React component above. First we create a class for our component. After that we define some initial state for it, then we render and finally we define some custom callbacks for our handlers if they exist. In this case I decided to implement an extra feature, liking. The current implementation just keeps track of the amount of likes per component.</p>
<p>&#x4F60;&#x53EF;&#x4EE5;&#x5728;&#x4E0A;&#x9762;&#x770B;&#x5230;&#x4E00;&#x4E9B;&#x57FA;&#x7840;&#x7684; React &#x7EC4;&#x4EF6;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x4E00;&#x5F00;&#x59CB;&#x6211;&#x4EEC;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;&#x7EC4;&#x4EF6;&#x7684;&#x7C7B;&#xFF0C;&#x7136;&#x540E;&#x6211;&#x4EEC;&#x5728;&#x521D;&#x59CB;&#x5316;&#x7684;&#x65F6;&#x5019;&#x5B9A;&#x4E49;&#x4E00;&#x4E9B;&#x72B6;&#x6001;&#xFF0C;&#x7136;&#x540E;&#x6211;&#x4EEC;&#x6E32;&#x67D3;&#xFF0C;&#x6700;&#x540E;&#x6211;&#x4EEC;&#x5B9A;&#x5236;&#x4E86;&#x4E00;&#x4E9B;&#x56DE;&#x8C03;&#x3002;&#x5728;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;&#x6211;&#x51B3;&#x5B9A;&#x53BB;&#x5B9E;&#x65BD;&#x4E00;&#x4E2A;&#x989D;&#x5916;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x70B9;&#x8D5E;&#x3002;&#x8FD9;&#x4E2A;&#x5DE5;&#x4F5C;&#x53EA;&#x662F;&#x4FDD;&#x6301;&#x4E86;&#x4E00;&#x4E2A;&#x8DDF;&#x8E2A;&#x70B9;&#x8D5E;&#x7EC4;&#x4EF6;&#x7684;&#x8BA1;&#x6570;&#x3002;</p>
<p>In practice you would transmit like amounts to a backend and add some validation there but this is a good starting point for understanding how state works in React.</p>
<p>&#x5728;&#x5B9E;&#x8DF5;&#x4E2D;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x628A;&#x70B9;&#x8D5E;&#x8BA1;&#x6570;&#x4F20;&#x8F93;&#x7ED9;&#x540E;&#x7AEF;&#xFF0C;&#x7136;&#x540E;&#x6DFB;&#x52A0;&#x4E00;&#x4E9B;&#x9A8C;&#x8BC1;&#xFF0C;&#x4E0D;&#x8FC7;&#x76EE;&#x524D;&#x8FD9;&#x4E2A;&#x9636;&#x6BB5;&#x5BF9;&#x4E8E;&#x7406;&#x89E3; State &#x5728; React &#x4E2D;&#x7684;&#x662F;&#x5982;&#x4F55;&#x4F7F;&#x7528;&#x7684;&#x5DF2;&#x7ECF;&#x662F;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x597D;&#x7684;&#x5F00;&#x7AEF;&#x4E86;&#x3002;</p>
<p><code>getInitialState</code> and <code>render</code> are a part of a <a href="http://facebook.github.io/react/docs/component-specs.html" target="_blank">React component&apos;s lifecycle as documented officially</a>. There are additional hooks that allow you to do things like set up adapters for <code>jQuery</code> plugins and such.</p>
<p><code>getInitialState</code> &#x548C; <code>render</code> &#x662F; <a href="http://facebook.github.io/react/docs/component-specs.html" target="_blank">React &#x7EC4;&#x4EF6;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#x5B98;&#x65B9;&#x6587;&#x6863;</a> &#x7684;&#x4E00;&#x90E8;&#x5206;&#x3002;&#x4E5F;&#x6709;&#x989D;&#x5916;&#x7684;&#x80FD;&#x591F;&#x8BA9;&#x4F60;&#x53BB;&#x8BBE;&#x7F6E;&#x52A0;&#x8F7D; <code>jQuery</code> &#x63D2;&#x4EF6;&#x4E4B;&#x7C7B;&#x7684;&#x9002;&#x914D;&#x5668;&#x7684;&#x94A9;&#x5B50;&#x3002;</p>
<p>In this example CSS naming has been modeled after <a href="http://suitcss.github.io/" target="_blank">Suit CSS</a> conventions as those look clean to me. That&apos;s just one way to deal with it.</p>
<p>&#x5728;&#x4F8B;&#x5B50;&#x4E2D;&#x7684; CSS &#x7684;&#x547D;&#x540D;&#x662F;&#x6839;&#x636E; <a href="http://suitcss.github.io/" target="_blank">Suit CSS</a> &#x7EA6;&#x5B9A;&#x5904;&#x7406;&#x540E;&#x7684;&#xFF0C;&#x8FD9;&#x6837;&#x5BF9;&#x6211;&#x6765;&#x8BF4;&#x770B;&#x8D77;&#x6765;&#x975E;&#x5E38;&#x5E72;&#x51C0;&#xFF0C;&#x8FD9;&#x53EA;&#x662F;&#x4E00;&#x79CD;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x800C;&#x5DF2;&#x3002;</p>
<h3 id="&#x5904;&#x7406;&#x64CD;&#x4F5C;">&#x5904;&#x7406;&#x64CD;&#x4F5C;</h3>
<p>Let&apos;s say we want to modify the owner of our TodoItems. For the sake of simplicity let&apos;s expect it&apos;s just a string and owner is the same for all TodoItems. Based on this design it would make sense to have an input for owner at our user interface. A naive implementation would look something like this:</p>
<p>&#x8BA9;&#x6211;&#x4EEC;&#x6765;&#x5F00;&#x59CB;&#x4FEE;&#x6539;&#x6211;&#x4EEC;&#x7684; TodoItems &#x7684; owner&#xFF0C;&#x4E3A;&#x4E86;&#x7B80;&#x5316;&#x8FD9;&#x4E2A;&#x76EE;&#x7684;&#xFF0C;&#x6211;&#x4EEC;&#x5047;&#x8BBE; owner &#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x800C;&#x4E14;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#xFF0C;&#x57FA;&#x4E8E;&#x8FD9;&#x4E2A;&#x8BBE;&#x8BA1;&#xFF0C;&#x5728;&#x7528;&#x6237;&#x754C;&#x9762;&#x91CC;&#x589E;&#x52A0;&#x4E00;&#x4E2A;&#x8F93;&#x5165;&#x6846;&#x7ED9;&#x7528;&#x6237;&#x6765;&#x4FEE;&#x6539;&#x7528;&#x6237;&#x540D;&#xFF0C;&#x6539;&#x52A8;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A;</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> React = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;react&apos;</span>);
<span class="hljs-keyword">var</span> TodoItem = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;./TodoItem.jsx&apos;</span>);


<span class="hljs-built_in">module</span>.exports = React.createClass({
    getInitialState() {
        <span class="hljs-keyword">return</span> {
            todoItems: [
                {
                    task: <span class="hljs-string">&apos;Learn React&apos;</span>,
                },
                {
                    task: <span class="hljs-string">&apos;Learn Webpack&apos;</span>,
                },
                {
                    task: <span class="hljs-string">&apos;Conquer World&apos;</span>,
                }
            ],
            owner: <span class="hljs-string">&apos;John Doe&apos;</span>,
        };
    },

    render() {
        <span class="hljs-keyword">var</span> todoItems = <span class="hljs-keyword">this</span>.state.todoItems;
        <span class="hljs-keyword">var</span> owner = <span class="hljs-keyword">this</span>.state.owner;

        <span class="hljs-keyword">return</span> &lt;div&gt;
            &lt;div className=&apos;ChangeOwner&apos;&gt;
                &lt;input type=&apos;text&apos; defaultValue={owner} onChange={this.updateOwner} /&gt;
            &lt;/div&gt;

            &lt;div className=&apos;TodoItems&apos;&gt;
                &lt;ul&gt;{todoItems.map((todoItem, i) =&gt;
                    &lt;li key={&apos;todoitem&apos; + i}&gt;
                        &lt;TodoItem owner={owner} task={todoItem.task} /&gt;
                    &lt;/li&gt;
                )}&lt;/ul&gt;
            &lt;/div&gt;
        &lt;/div&gt;;
    },

    updateOwner() {
        this.setState({
            owner: e.target.value,
        });
    },
});
</code></pre>
<p>We could push <code>TodoItems</code> and <code>ChangeOwner</code> to separate components but I&apos;ve kept it all in the same for now. Given React has one way binding by default, we get some extra noise compared to some other setups. React provides <a href="http://facebook.github.io/react/docs/two-way-binding-helpers.html" target="_blank">ReactLink</a> helper to help deal with this particular case.</p>
<p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x628A; <code>TodoItems</code> &#x548C; <code>ChangeOwner</code> &#x5206;&#x79BB;&#x51FA;&#x53BB;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x6682;&#x65F6;&#x4E0D;&#x8FD9;&#x4E48;&#x505A;&#x4E86;&#x3002;React &#x9ED8;&#x8BA4;&#x63D0;&#x4F9B;&#x4E86;&#x5355;&#x5411;&#x6570;&#x636E;&#x7ED1;&#x5B9A;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8BBE;&#x7F6E;&#x6765;&#x8C03;&#x6574;&#xFF0C;React &#x63D0;&#x4F9B;&#x4E86; <a href="http://facebook.github.io/react/docs/two-way-binding-helpers.html" target="_blank">ReactLink</a> &#x6765;&#x63D0;&#x4F9B;&#x53CC;&#x5411;&#x6570;&#x636E;&#x7ED1;&#x5B9A;&#x3002;</p>
<p>Even though lack of two way binding might sound like a downer, it actually isn&apos;t that bad a thing. It makes it easier to reason about the system. You simply have to follow the flow. This idea is highlighted in the Flux architecture. The easiest way to visualize it is to think up an infinite waterfall or a snake eating its tail. That&apos;s how the flow in the world of React generally works. Compared to this two way binding feels more chaotic.</p>
<p>&#x5C3D;&#x7BA1;&#x53CC;&#x5411;&#x6570;&#x636E;&#x7ED1;&#x5B9A;&#x7684;&#x7F3A;&#x5931;&#x542C;&#x8D77;&#x6765;&#x8BA9;&#x4EBA;&#x6CAE;&#x4E27;&#xFF0C;&#x4F46;&#x5B9E;&#x9645;&#x4E0A;&#x5E76;&#x4E0D;&#x662F;&#x4E00;&#x4EF6;&#x574F;&#x4E8B;&#xFF0C;&#x5B83;&#x80FD;&#x591F;&#x8BA9;&#x7CFB;&#x7EDF;&#x66F4;&#x52A0;&#x8F7B;&#x677E;&#x7684;&#x8FD0;&#x884C;&#xFF0C;&#x4F60;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x8DDF;&#x8E2A;&#x6570;&#x636E;&#x6D41;&#x3002;&#x4E0D;&#x8FC7; FB &#x63D0;&#x51FA;&#x4E86; Flux &#x67B6;&#x6784;&#xFF0C;&#x6700;&#x7B80;&#x5355;&#x7684;&#x65B9;&#x5F0F;&#x53BB;&#x60F3;&#x51FA;&#x4E00;&#x4E2A;&#x65E0;&#x9650;&#x7011;&#x5E03;&#x6D41;&#xFF0C;&#x6216;&#x8005;&#x8D2A;&#x5403;&#x86C7;&#xFF0C;&#x5C31;&#x662F; React &#x7684;&#x4E16;&#x754C;&#x5728;&#x505A;&#x7684;&#x8FD9;&#x4E2A;&#x6570;&#x636E;&#x6D41;&#x7684;&#x4E8B;&#x60C5;&#xFF0C;&#x5BF9;&#x6BD4;&#x8FD9;&#x4E24;&#x79CD;&#x7ED1;&#x5B9A;&#x65B9;&#x5F0F;&#x8BA9;&#x4EBA;&#x611F;&#x89C9;&#x66F4;&#x52A0;&#x8FF7;&#x832B;&#x3002;</p>
<h3 id="&#x4F7F;&#x7528;&#x4E00;&#x4E2A;mixin">&#x4F7F;&#x7528;&#x4E00;&#x4E2A;Mixin</h3>
<p>If we wanted to model the code above using a ReactLink, we would end up with something like this:</p>
<p>&#x5982;&#x679C;&#x6211;&#x4EEC;&#x60F3;&#x4F7F;&#x7528; ReactLink&#x7684;&#x8BDD;&#xFF0C;&#x5C31;&#x50CF;&#x4E0B;&#x9762;&#x8FD9;&#x6837;&#xFF1A;</p>
<pre><code class="lang-javascript"><span class="hljs-comment">// ReactLink &#x662F;&#x4E00;&#x4E2A;&#x63D2;&#x4EF6;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x628A;&#x5B83;&#x5F15;&#x5165;&#x3002;</span>
<span class="hljs-keyword">var</span> React = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;react/addons&apos;</span>);

...

module.exports = React.createClass({
    mixins: [React.addons.LinkedStateMixin],

    ...

    render() {
        <span class="hljs-keyword">var</span> todoItems = <span class="hljs-keyword">this</span>.state.todoItems;

        <span class="hljs-keyword">return</span> &lt;div&gt;
            &lt;div className=&apos;ChangeOwner&apos;&gt;
                &lt;input type=&apos;text&apos; valueLink={this.linkState(&apos;owner&apos;)} /&gt;
            &lt;/div&gt;

            &lt;div className=&apos;TodoItems&apos;&gt;
                &lt;ul&gt;{todoItems.map((todoItem, i) =&gt;
                    &lt;li key={&apos;todoitem&apos; + i}&gt;
                        &lt;TodoItem owner={owner} task={todoItem.task} /&gt;
                    &lt;/li&gt;
                )}&lt;/ul&gt;
            &lt;/div&gt;
        &lt;/div&gt;;
    },
});
</code></pre>
<p>Now we can skip that <code>onChange</code> handler. That <code>React.addons.LinkedStateMixin</code> encapsulates the logic. <a href="http://facebook.github.io/react/docs/reusable-components.html#mixins" target="_blank">Mixins</a> provide us one way to encapsulate shared concerns such as this into something which can be reused easily.</p>
<p>&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x8DF3;&#x8FC7;&#x7ED1;&#x5B9A; <code>onChange</code> &#x4E8B;&#x4EF6;&#x4E86;&#xFF0C;<code>React.addons.LinkedStateMixin</code> &#x5C01;&#x88C5;&#x4E86;&#x903B;&#x8F91;&#x3002;<a href="http://facebook.github.io/react/docs/reusable-components.html#mixins" target="_blank">Mixins</a> &#x7ED9;&#x6211;&#x4EEC;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x79CD;&#x53EF;&#x4EE5;&#x91CD;&#x590D;&#x4F7F;&#x7528;&#x7684;&#x5C01;&#x88C5;&#x65B9;&#x6CD5;&#x3002;</p>
<blockquote>
<p>It would be easy to start expanding the example now. You could for instance provide means to manipulate the contents of the Todo list or start extracting various parts into components of their own. It is up to you to make the app yours. If you are still feeling a bit lost, please read on. This is supposed to be a brief introduction to the topic!</p>
<p>&#x73B0;&#x5728;&#x62D3;&#x5C55;&#x4F8B;&#x5B50;&#x5DF2;&#x7ECF;&#x975E;&#x5E38;&#x5BB9;&#x6613;&#x4E86;&#xFF0C;&#x4F60;&#x73B0;&#x5728;&#x5E94;&#x8BE5;&#x5C31;&#x53EF;&#x4EE5;&#x62D3;&#x5C55; Todo &#x5217;&#x8868;&#xFF0C;&#x6216;&#x8005;&#x628A;&#x5404;&#x79CD;&#x7EC4;&#x4EF6;&#x5206;&#x79BB;&#xFF0C;&#x8FD9;&#x53D6;&#x51B3;&#x4E8E;&#x4F60;&#x3002;&#x5982;&#x679C;&#x4F60;&#x73B0;&#x5728;&#x8FD8;&#x662F;&#x89C9;&#x5F97;&#x4E0D;&#x591F;&#x638C;&#x63E1;&#xFF0C;&#x90A3;&#x4E48;&#x7EE7;&#x7EED;&#x9605;&#x8BFB;&#xFF0C;&#x8FD9;&#x8282;&#x53EA;&#x662F;&#x8BDD;&#x9898;&#x7684;&#x4E00;&#x4E2A;&#x4ECB;&#x7ECD;&#x3002;</p>
</blockquote>
<h3 id="&#x6D4B;&#x8BD5;">&#x6D4B;&#x8BD5;</h3>
<p>If you get serious about the Todo app, I recommend trying <a href="https://facebook.github.io/jest/" target="_blank">Jest</a> out. Getting the initial test run might be a bit challenging but after you learn the basics of the API, it gets a lot simpler. The basic idea is that you instantiate a component with some properties and then query DOM using Jest and finally assert that the values in the UI are what you expect.</p>
<p>&#x5982;&#x679C;&#x4F60;&#x89C9;&#x5F97;&#x8FD9;&#x4E2A; Todo &#x5E94;&#x7528;&#x9700;&#x8981;&#x6D4B;&#x8BD5;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x63A8;&#x8350; <a href="https://facebook.github.io/jest/" target="_blank">Jest</a>&#xFF0C;&#x521A;&#x5F00;&#x59CB;&#x5199;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;&#x53EF;&#x80FD;&#x662F;&#x4E00;&#x70B9;&#x6311;&#x6218;&#x4F46;&#x662F;&#x5728;&#x4F60;&#x5B66;&#x4E60;&#x4E00;&#x4E9B;&#x57FA;&#x7840;&#x7684; API &#x4E4B;&#x540E;&#xFF0C;&#x5B83;&#x4F1A;&#x53D8;&#x5F97;&#x66F4;&#x52A0;&#x7B80;&#x5355;&#xFF0C;&#x6700;&#x57FA;&#x672C;&#x7684;&#x662F;&#x4F60;&#x5B9E;&#x4F8B;&#x5316;&#x4E00;&#x4E2A;&#x5E26;&#x6709;&#x4E00;&#x4E9B;&#x5C5E;&#x6027;&#x7684;&#x7EC4;&#x4EF6;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x7136;&#x540E;&#x7528; Jest &#x67E5;&#x8BE2; DOM&#xFF0C;&#x6700;&#x540E;&#x65AD;&#x8A00;&#x754C;&#x9762;&#x4E2D;&#x7684;&#x503C;&#x662F;&#x4F60;&#x671F;&#x671B;&#x7684;&#x503C;&#x3002;</p>
<p>When you go beyond component level, that is where tools such as Selenium come in. You can use standard end to end testing tools on a higher level.</p>
<p>&#x5F53;&#x4F60;&#x7AD9;&#x5728;&#x7EC4;&#x4EF6;&#x5C42;&#x7EA7;&#x4E4B;&#x4E0A;&#x65F6;&#xFF0C;&#x5C31;&#x6709;&#x4E86;&#x6BD4;&#x5982;&#x7C7B;&#x4F3C; Selenium &#x7684;&#x7EC4;&#x4EF6;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x5728;&#x66F4;&#x9AD8;&#x5C42;&#x7EA7;&#x4F7F;&#x7528;&#x6807;&#x51C6;&#x7684;&#x7AEF;&#x5BF9;&#x7AEF;&#x6D4B;&#x8BD5;&#x5DE5;&#x5177;&#x3002;</p>
<h2 id="flux-&#x67B6;&#x6784;&#x53CA;&#x5176;&#x53D8;&#x79CD;">Flux &#x67B6;&#x6784;&#x53CA;&#x5176;&#x53D8;&#x79CD;</h2>
<p>As you saw above, it is quite simple to throw together a couple of components and start building an app. You can get quite far with <code>props</code> and <code>state</code>. Just load up some data over AJAX at <code>getInitialState</code> and pass it around. After a while this all might start feeling a bit unwieldy. Why, for instance, my components should have to know something about how to communicate with the backend?</p>
<p>&#x5C31;&#x50CF;&#x4F60;&#x770B;&#x5230;&#x7684;&#xFF0C;&#x628A;&#x4E00;&#x4E9B;&#x7EC4;&#x4EF6;&#x653E;&#x5230;&#x4E00;&#x8D77;&#x5C31;&#x53EF;&#x4EE5;&#x7EC4;&#x6210;&#x4E00;&#x4E2A;&#x5E94;&#x7528;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x7528; <code>props</code> &#x548C; <code>state</code> &#x505A;&#x7684;&#x66F4;&#x591A;&#xFF0C;&#x6216;&#x8005;&#x5728; <code>getInitialState</code> &#x4E2D;&#x4F7F;&#x7528; AJAX &#x52A0;&#x8F7D;&#x6570;&#x636E;&#x7136;&#x540E;&#x4F20;&#x7ED9;&#x5176;&#x4ED6;&#x7EC4;&#x4EF6;&#x3002;&#x8FD9;&#x4E9B;&#x4F7F;&#x7528;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x4E4B;&#x540E;&#x53EF;&#x80FD;&#x4F1A;&#x89C9;&#x5F97;&#x6709;&#x4E9B;&#x7B28;&#x62D9;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#xFF1F;&#x5B9E;&#x8DF5;&#x4E2D;&#xFF0C;&#x7EC4;&#x4EF6;&#x4EEC;&#x9700;&#x8981;&#x77E5;&#x9053;&#x5982;&#x4F55;&#x548C;&#x540E;&#x7AEF;&#x901A;&#x8BAF;&#x3002;</p>
<p>This is where Flux architecture and its variants come in. I will start by describing <a href="https://github.com/spoike/refluxjs" target="_blank">Reflux</a>, a simplified variant of it. You can then work up to <a href="http://facebook.github.io/flux/docs/overview.html" target="_blank">understanding Flux</a> in fuller detail once you understand this simplified setup.</p>
<p>&#x6240;&#x4EE5;&#x51FA;&#x73B0;&#x4E86; Flux &#x67B6;&#x6784;&#x548C;&#x5B83;&#x7684;&#x4E00;&#x4E9B;&#x53D8;&#x79CD;&#xFF0C;&#x6211;&#x4F1A;&#x4ECB;&#x7ECD; <a href="https://github.com/spoike/refluxjs" target="_blank">Reflux</a> &#x4E00;&#x79CD;&#x975E;&#x5E38;&#x7B80;&#x5355;&#x7684; Flux &#x53D8;&#x79CD;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x9605;&#x8BFB;&#x8FD9;&#x4E2A; <a href="http://facebook.github.io/flux/docs/overview.html" target="_blank">understanding Flux</a> &#x6765;&#x5168;&#x9762;&#x4E86;&#x89E3; Flux&#x3002;</p>
<p>In addition to View Components which we just discussed, Reflux introduces the concepts of Actions and Stores. The flow goes like this: Components -&gt; Actions -&gt; Stores -&gt; Components. Ie. you could have some control in a Component which then triggers some Action which then performs some operation (say PUT) and updates Store state. This state change is then propagated to Components listening to the Store.</p>
<p>&#x5E76;&#x4E14;&#xFF0C;Reflux &#x4ECB;&#x7ECD;&#x4E86;&#x4E00;&#x79CD; Actions &#x548C; Stores &#x7684;&#x6982;&#x5FF5;&#x53BB;&#x7EC4;&#x6210;&#x521A;&#x624D;&#x6211;&#x4EEC;&#x8BA8;&#x8BBA;&#x7684;&#x89C6;&#x56FE;&#x7EC4;&#x4EF6;&#x3002;&#x6574;&#x4E2A;&#x6570;&#x636E;&#x6D41;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A;&#x7EC4;&#x4EF6; -&gt; Actions -&gt; Stores -&gt; &#x7EC4;&#x4EF6;&#x3002;&#x8FD9;&#x6837;&#x4F60;&#x53EF;&#x4EE5;&#x5728;&#x4E00;&#x4E2A;&#x7EC4;&#x4EF6;&#x4E2D;&#x63A7;&#x5236;&#x89E6;&#x53D1;&#x4E00;&#x4E9B; Action &#x7136;&#x540E;&#x6267;&#x884C;&#x4E00;&#x4E9B;&#x64CD;&#x4F5C;&#xFF08;&#x6BD4;&#x5982; PUT&#xFF09;&#x7136;&#x540E;&#x66F4;&#x65B0; Store &#x7684;&#x72B6;&#x6001;&#xFF0C;&#x72B6;&#x6001;&#x7684;&#x66F4;&#x65B0;&#x4F20;&#x64AD;&#x7ED9;&#x76D1;&#x542C; Store &#x7684;&#x90A3;&#x4E9B;&#x7EC4;&#x4EF6;&#x4EEC;&#x3002;</p>
<p>In case of our Todo example we would define basic <code>TodoActions</code> like create, update, delete and such. We would also have a <code>TodoStore</code>. It would maintain a data structure of a <code>TodoList</code>. Our components would then consume that data and display it as appropriate.</p>
<p>&#x5728;&#x6211;&#x4EEC;&#x7684;&#x8FD9;&#x4E2A; Todo &#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x4E2A;&#x57FA;&#x7840;&#x7684; <code>TodoActions</code> &#x6BD4;&#x5982;&#x521B;&#x5EFA;&#x3001;&#x66F4;&#x65B0;&#x3001;&#x5220;&#x9664;&#x4E4B;&#x7C7B;&#x7684;&#xFF0C;&#x6211;&#x4EEC;&#x4E5F;&#x6709;&#x4E2A; <code>TodoStore</code>&#xFF0C;&#x5B83;&#x662F;&#x6574;&#x4E2A; <code>TodoList</code> &#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E2D;&#x5FC3;&#xFF0C;&#x7EC4;&#x4EF6;&#x4EEC;&#x4F1A;&#x8BFB;&#x53D6;&#x90A3;&#x91CC;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x7136;&#x540E;&#x9002;&#x5F53;&#x5F97;&#x5C55;&#x73B0;&#x51FA;&#x6765;&#x3002;</p>
<p>As development of Reflux is quite in flux I won&apos;t give you a full example in this case. I just wanted to illustrate one possible way to deal with scaling up from bare React. You should explore various options and deepen your understanding of possible architectures. The ideas are quite similar but the devil is in the details as always. There are always drawbacks to consider.</p>
<p>Reflux &#x7684;&#x5F00;&#x53D1;&#x548C; Flux &#x5DEE;&#x4E0D;&#x591A;&#xFF0C;&#x6211;&#x5C31;&#x4E0D;&#x5728;&#x8FD9;&#x91CC;&#x8BE6;&#x7EC6;&#x8BB2;&#x8FF0;&#x4E86;&#xFF0C;&#x6211;&#x53EA;&#x662F;&#x60F3;&#x8BF4;&#x660E;&#x5982;&#x4F55;&#x5904;&#x7406;&#x4ECE;&#x7EAF; React &#x6269;&#x5927;&#x7684;&#x4E00;&#x79CD;&#x53EF;&#x80FD;&#x7684;&#x65B9;&#x5F0F;&#x3002;&#x4F60;&#x9700;&#x8981;&#x53BB;&#x6D4F;&#x89C8;&#x4E00;&#x4E9B;&#x76F8;&#x5173;&#x770B;&#x6CD5;&#xFF0C;&#x7136;&#x540E;&#x6DF1;&#x5165;&#x7406;&#x89E3;&#x90A3;&#x4E9B;&#x67B6;&#x6784;&#x3002;&#x90A3;&#x4E9B;&#x60F3;&#x6CD5;&#x90FD;&#x5DEE;&#x4E0D;&#x591A;&#xFF0C;&#x5C31;&#x662F;&#x7EC6;&#x8282;&#x4E0D;&#x592A;&#x4E00;&#x6837;&#xFF0C;&#x90FD;&#x6709;&#x5404;&#x81EA;&#x7684;&#x4E00;&#x4E9B;&#x7F3A;&#x70B9;&#x6709;&#x5F85;&#x8003;&#x8651;&#x3002;</p>
<h3 id="&#x540C;&#x6784;&#x6E32;&#x67D3;">&#x540C;&#x6784;&#x6E32;&#x67D3;</h3>
<p>One of the big features which React provides thanks to its design is so called isomorphic rendering. Back in the day we used to render whole HTML in the backend and provide just that for the client to render. Then we would sprinkle a little JavaScript magic to make things more interactive and so on. After a while the pendulum swung to frontend side. We served minimal amount of HTML to the client and constructed the rest, including routing, using JavaScript entirely on frontend.</p>
<p>React &#x8BBE;&#x8BA1;&#x4E86;&#x4E00;&#x79CD;&#x53EB;&#x505A;&#x4E24;&#x7AEF;&#x6E32;&#x67D3;&#x7684;&#x91CD;&#x8981;&#x529F;&#x80FD;&#x3002;&#x8FC7;&#x53BB;&#x6211;&#x4EEC;&#x5728;&#x540E;&#x7AEF;&#x6E32;&#x67D3;&#x6574;&#x4E2A; HTML&#xFF0C;&#x7136;&#x540E;&#x4EA4;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#x53BB;&#x6E32;&#x67D3;&#xFF0C;&#x7136;&#x540E;&#x6211;&#x4EEC;&#x52A0;&#x4E0A;&#x4E00;&#x70B9;&#x70B9; JavaScript &#x505A;&#x7684;&#x4EA4;&#x4E92;&#x3002;&#x518D;&#x540E;&#x6765;&#xFF0C;&#x8FD9;&#x4E2A;&#x6D3B;&#x4EA4;&#x7ED9;&#x6D4F;&#x89C8;&#x5668;&#x505A;&#x53BB;&#xFF0C;&#x540E;&#x7AEF;&#x8FD4;&#x56DE;&#x6700;&#x5C0F;&#x7684; HTML &#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x5BA2;&#x6237;&#x7AEF;&#x6784;&#x5EFA;&#x4E86;&#x4E00;&#x6574;&#x5957;&#x7528; JavaScript &#x5168;&#x6743;&#x63A7;&#x5236;&#x7684;&#x7CFB;&#x7EDF;&#xFF0C;&#x5305;&#x62EC;&#x8DEF;&#x7531;&#x3002;</p>
<p>The main problems with frontend driven rendering have to do with performance, high dependency on JavaScript (think of the noscript folk!) and poor SEO. With isomorphic rendering you can mitigate these problems effectively. React allows you to prerender HTML at backend side. You can also hydrate some stores with pre-existing data making it possible to skip certain data queries altogether initially! Even web crawlers will be happy as they get some HTML to scrape.</p>
<p>&#x524D;&#x7AEF;&#x9A71;&#x52A8;&#x6E32;&#x67D3;&#x7684;&#x4E3B;&#x8981;&#x95EE;&#x9898;&#x662F;&#x6027;&#x80FD;&#x95EE;&#x9898;&#x3001; JavaScript &#x7684;&#x9AD8;&#x5EA6;&#x4F9D;&#x8D56;&#xFF08;&#x8BBE;&#x60F3;&#x90A3;&#x4E9B;&#x4E0D;&#x80FD;&#x8FD0;&#x884C; JavaScript &#x7684;&#x60C5;&#x51B5;&#xFF09;&#x548C; SEO &#x95EE;&#x9898;&#x3002;&#x4F7F;&#x7528;&#x4E24;&#x7AEF;&#x6E32;&#x67D3;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x8F7B;&#x677E;&#x89E3;&#x51B3;&#x8FD9;&#x4E9B;&#x95EE;&#x9898;&#x3002;React &#x5141;&#x8BB8;&#x4F60;&#x5728;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x9884;&#x6E32;&#x67D3; HTML&#xFF0C;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x9884;&#x5148;&#x5B58;&#x50A8;&#x4E00;&#x4E9B;&#x6570;&#x636E;&#x6765;&#x8DF3;&#x8FC7;&#x521D;&#x59CB;&#x5316;&#x7684;&#x4E00;&#x4E9B;&#x6570;&#x636E;&#x67E5;&#x8BE2;&#x3002;&#x751A;&#x81F3;&#x4E00;&#x4E9B;&#x7F51;&#x7EDC;&#x722C;&#x866B;&#x80FD;&#x591F;&#x8F7B;&#x677E;&#x5730;&#x83B7;&#x53D6;&#x5230;&#x4E00;&#x4E9B; HTML &#x5185;&#x5BB9;&#x3002;</p>
<p>This is still partly uncharted territory. Various implementations of Flux still struggle with the concept. I have no doubt we will see stronger solutions in the future, however, as people learn to deal with isomorphism better. That said isomorphic rendering can be considered a nice extra capability to have but it definitely isn&apos;t something that&apos;s just must have. There are some ways to work around certain issues, such as poor SEO, even without it. It just depends on where you want to put the effort.</p>
<p>&#x8FD9;&#x4E00;&#x90E8;&#x5206;&#x4ECD;&#x7136;&#x662F;&#x4E00;&#x4E2A;&#x672A;&#x77E5;&#x7684;&#x9886;&#x57DF;&#xFF08;&#x8BD1;&#x8005;&#x6CE8;&#xFF1A;&#x539F;&#x6587;&#x53D1;&#x5E03;&#x4E8E;2015&#x5E74;4&#x6708;&#xFF09;&#xFF0C;&#x5F88;&#x591A; Flux &#x7684;&#x5B9E;&#x73B0;&#x5728;&#x8FD9;&#x4E2A;&#x6982;&#x5FF5;&#x4E0A;&#x8FD8;&#x6CA1;&#x540C;&#x610F;&#xFF0C;&#x4F46;&#x662F;&#x6BCB;&#x5EB8;&#x7F6E;&#x7591;&#xFF0C;&#x6211;&#x4EEC;&#x5728;&#x672A;&#x6765;&#x80FD;&#x591F;&#x770B;&#x5230;&#x66F4;&#x52A0;&#x5B8C;&#x5584;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x65E0;&#x8BBA;&#x5982;&#x4F55;&#xFF0C;&#x5927;&#x5BB6;&#x4F1A;&#x8BA4;&#x8BC6;&#x5230;&#x4E24;&#x7AEF;&#x6E32;&#x67D3;&#x7684;&#x597D;&#x5904;&#x3002;&#x867D;&#x7136;&#x4E24;&#x7AEF;&#x6E32;&#x67D3;&#x542C;&#x8D77;&#x6765;&#x662F;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x597D;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x4F46;&#x662F;&#x5B83;&#x4E0D;&#x662F;&#x5FC5;&#x8981;&#x7684;&#x3002;&#x73B0;&#x5728;&#x5DF2;&#x7ECF;&#x6709;&#x5F88;&#x591A;&#x80FD;&#x591F;&#x89E3;&#x51B3;&#x8FD9;&#x4E9B;&#x95EE;&#x9898;&#x7684;&#x65B9;&#x6848;&#xFF0C;&#x6BD4;&#x5982; SEO &#x7684;&#x95EE;&#x9898;&#xFF0C;&#x751A;&#x81F3;&#x6CA1;&#x6709;&#x7528;&#x8FD9;&#x79CD;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x5B83;&#x53EA;&#x662F;&#x4F9D;&#x8D56;&#x4E8E;&#x4F60;&#x60F3;&#x8981;&#x5982;&#x4F55;&#x4ED8;&#x51FA;&#x52AA;&#x529B;&#x3002;</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="Requiring-files.html" class="navigation navigation-prev " aria-label="Previous page: 引入文件">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="Configuring-react-js.html" class="navigation navigation-next " aria-label="Next page: 配置 React JS">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"search":{"keywords":["meta","react"]},"title":"React JS","level":"1.3","depth":1,"next":{"title":"配置 React JS","level":"1.3.1","depth":2,"path":"Configuring-react-js.md","ref":"Configuring-react-js.md","articles":[]},"previous":{"title":"引入文件","level":"1.2.4","depth":2,"path":"Requiring-files.md","ref":"Requiring-files.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-lunr","-search","search-plus","fontsettings"],"root":"./content","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"search-plus":{},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{"version":"0.0.0"},"title":"test search plus plugin","gitbook":"*"},"file":{"path":"Introduction-to-React-JS.md","mtime":"2017-04-21T15:43:22.000Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-04-25T12:02:48.767Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-search-plus/jquery.mark.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search-plus/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    

    </body>
</html>

